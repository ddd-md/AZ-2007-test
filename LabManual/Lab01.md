---
lab:
  title: 'ラボ: GitHub Copilot を使用してアプリ開発を加速する'
  type: Answer Key
  module: Modules 2-5
---

# ラボ: GitHub Copilot を使用してアプリ開発を加速する

## パート 1: GitHub Copilot ツールを使用してコードを分析および文書化する

### 開始する前に

#### プロジェクトの概要

**あなたの役割**：地域のIT部門で働くソフトウェア開発者

**背景状況**：
- コミュニティ図書館のサーバーが事故で破損
- サーバー交換の承認に数週間が必要
- 図書館は一時的に閉館中

**あなたのミッション**：
司書が基本的な業務（書籍の貸し出し・返却）を継続できる一時的なソリューションを3日で開発する

**プロジェクトの制約条件**：
- 開発チーム：あなたと同僚1名
- 実行環境：図書館のラップトップ
- アプリケーション形式：コンソールアプリケーション
- 要件：美しいUIよりも安全性と信頼性を重視

**データ構成**：
あなたの担当は、図書館の記録から以下のJSONファイルを作成することです：
- 図書館利用者のアカウント情報
- 書籍情報
- 書籍の貸し出し情報

#### ラボ シナリオ (パート 1)

このパート1では、GitHub Copilotを活用して以下のタスクを実行します：

1. **コード理解**：既存の図書館アプリケーションを分析・理解する
2. **文書化**：コードベースの説明とドキュメントを生成する  
3. **リポジトリ作成**：GitHub リポジトリを作成してREADMEファイルを生成する

**学習内容**：
- Visual Studio Code用GitHub Copilot拡張機能の設定
- GitHub Copilotを使用したコードベース分析
- GitHub リポジトリの作成とREADMEファイル生成

---

## 演習 1: GitHub Copilot 拡張機能を Visual Studio Code 用に構成する

### 目標
GitHub アカウントを使用してVisual Studio CodeでGitHub Copilotを利用できるようにセットアップします。

### 手順

#### ステップ 1: GitHub アカウントにサインイン

1. **ブラウザーを起動**し、新しいウィンドウを開きます

2. **GitHub Enterprise ポータル**にアクセスします
   ```plaintext
   https://github.com/enterprises/Microsoft-APL/sso
   ```

3. **サインイン情報を入力**します
   - メールアドレス/ユーザー名: `@lab.CloudPortalCredential(1).Username`
   - パスワード: `@lab.CloudPortalCredential(1).Password`

   > **💡 ポイント**: この認証情報は研修環境専用です

#### ステップ 2: Visual Studio Code に GitHub Copilot をインストール

1. **Visual Studio Code を起動**します

2. **拡張機能ビューを開く**
   - 左サイドバーの**拡張機能アイコン**（四角いブロックのアイコン）をクリック
   - または **Ctrl+Shift+X** を押下

3. **GitHub Copilot を検索**
   - 検索ボックスに「**GitHub Copilot**」と入力
   - **Enter** を押下

4. **拡張機能をインストール**
   - 検索結果から「**GitHub Copilot**」（GitHub製）を選択
   - 青い **[インストール]** ボタンをクリック

   > **⚠️ 注意**: 類似名の拡張機能があります。必ず「GitHub」が作成者であることを確認してください

#### ステップ 3: GitHub アカウントと連携

1. **サインイン通知を確認**
   - 「Sign in to use GitHub Copilot」という通知が表示されたら **[Sign in to GitHub]** をクリック
   - 通知が表示されない場合は次のステップに進んでください

2. **認証ダイアログの処理**
   - 「GitHub Copilot wants to sign in using GitHub」というダイアログが表示された場合
   - **[Allow]**（許可）をクリック

3. **ブラウザでの認証**
   - ブラウザで「Verify Session」ページが開きます
   - **[Continue]** をクリック

4. **アプリケーション認証**
   - 「Authorize Application」ページで **[Authorize Visual Studio Code]** をクリック
   - 「VS Codeで開く」ダイアログが表示されたら **[開く]** をクリック

#### ステップ 4: インストール完了の確認

1. **Visual Studio Code を再起動**
   - アプリケーションを完全に終了して再度開く
   - これにより GitHub Copilot が完全に統合されます

2. **統合状態を確認**
   - 画面上部のコマンドセンター右側に **「チャットを開く」** ボタンが表示されていることを確認
   - このボタンが表示されていれば設定完了です

> **✅ 完了チェック**: 
> - GitHub Copilot拡張機能がインストール済み
> - GitHubアカウントでの認証が完了
> - 「チャットを開く」ボタンが表示される

---

## 演習 2: ライブラリ アプリケーションのコードベースを分析する

### 目標
プロジェクトを理解し文書化する前に、図書館アプリケーションのアーキテクチャと主要機能を把握します。

---

### タスク 1: 開発環境にライブラリ アプリケーションを読み込む

#### ステップ 1: アプリケーションファイルのダウンロード

1. **新しいブラウザータブを開き**、以下のURLにアクセス
   ```plaintext
   https://raw.githubusercontent.com/MicrosoftLearning/APL-2007-Accelerate-app-development-by-using-GitHub-Copilot/master/LearnModuleExercises/Downloads/GuidedProjectApp.zip
   ```

2. **ダウンロード完了を確認**
   - 「GuidedProjectApp.zip」ファイルが自動的にダウンロードされます
   - ダウンロード完了後、ブラウザータブを閉じてください
   
   > **📝 メモ**: GitHubアカウントのブラウザページは開いたままにしておいてください

#### ステップ 2: ファイルの展開と配置

1. **Windowsエクスプローラーでダウンロードフォルダーを開く**

2. **ZIPファイルを展開**
   - **GuidedProjectApp.zip** を右クリック
   - **[すべて展開]** を選択
   - **[完了時に展開されたファイルを表示する]** にチェック
   - **[展開]** をクリック

3. **フォルダーを移動**
   - 展開された「AccelerateDevGitHubCopilot」フォルダーを確認
   - このフォルダーをデスクトップなど、アクセスしやすい場所にコピー

#### ステップ 3: Visual Studio Code でプロジェクトを開く

1. **Visual Studio Code を起動**

2. **プロジェクトフォルダーを開く**
   - **[ファイル]** メニュー → **[フォルダーを開く]**
   - デスクトップの **AccelerateDevGitHubCopilot** フォルダーを選択
   - **[フォルダーの選択]** をクリック

3. **信頼設定を確認**
   - 「このフォルダー内のファイルの作成者を信頼しますか？」ダイアログが表示された場合
   - **[はい、作成者を信頼します]** をクリック

> **⏱️ 読み込み時間**: プロジェクトファイルと.NET更新プログラムの読み込みに10〜20秒かかる場合があります

#### ステップ 4: プロジェクト構造の確認

1. **エクスプローラービューでソリューション構造を確認**
   ```
   AccelerateDevGitHubCopilot/
   ├── src/
   │   ├── Library.ApplicationCore/
   │   ├── Library.Console/
   │   └── Library.Infrastructure/
   └── tests/
       └── UnitTests/
   ```

2. **ソリューションのビルドテスト**
   - ソリューションエクスプローラーで **GuidedProjectApp** を右クリック
   - **[ビルド]** を選択
   - **警告**は表示されますが、**エラー**がないことを確認

> **⚠️ 重要**: 講師から特別な指示がない限り、ワークロードの更新プログラムはインストールしないでください

---

### タスク 2: GitHub Copilot を使用してライブラリ アプリケーションのコードベースを説明する

#### ステップ 1: チャットビューを開く

以下のいずれかの方法でチャットビューを開きます：
- 画面上部の **[チャットを開く]** ボタンをクリック
- **Ctrl + Alt + I** キーボードショートカット
- GitHub Copilot状態メニューから **[GitHub Copilot Chat]** を選択

> **🔐 認証**: 初回利用時に「GitHub Copilot Chat wants to sign in using GitHub」ダイアログが表示された場合は、**[許可]** をクリックし、GitHubアカウントで認証してください

#### ステップ 2: プロジェクト全体の説明を生成

1. **チャットビューで以下のプロンプトを入力**
   ```plaintext
   @workspace このプロジェクトについて説明してください
   ```

2. **生成された説明を確認**
   
   以下のような説明が生成されます：

   > このプロジェクトは、C#で実装された図書館管理システムです。3つの主要コンポーネントで構成されています：
   > 
   > **1. Library.ApplicationCore**: ビジネスロジックを含む中核ライブラリ
   > - エンティティ（Book、Patron、Loanなど）
   > - 列挙型（MembershipRenewalStatus、LoanReturnStatus等）
   > - サービス（LoanService、PatronService）
   > - インターフェース定義
   > 
   > **2. Library.Console**: ユーザーインターフェースとなるコンソールアプリケーション
   > - Program.cs: アプリケーションエントリーポイント
   > - ConsoleApp.cs: ユーザー操作ロジック
   > - appSettings.json: 設定ファイル
   > 
   > **3. Library.Infrastructure**: データ永続化を担当
   > - JSONベースのリポジトリ（JsonPatronRepository、JsonLoanRepository）
   > - データ読み込み・保存ロジック

#### ステップ 3: 個別クラスの詳細分析

1. **ConsoleApp.cs ファイルを開く**
   - src/Library.Console プロジェクトから **ConsoleApp.cs** を開く

2. **ConsoleApp クラスの説明を生成**
   ```plaintext
   @workspace #editor ConsoleApp クラスについて説明してください
   ```

   > **💡 ヒント**: `#editor` は現在エディターで開いているファイルをコンテキストに含める指定です

3. **Program.cs の説明を生成**
   - **Program.cs** ファイルを開く
   - 同様に説明を生成：
   ```plaintext
   @workspace #editor Program.cs ファイルについて説明してください
   ```

#### ステップ 4: データアクセス層の理解

1. **データアクセスファイルをチャットコンテキストに追加**
   - Library.Infrastructure プロジェクト → Data フォルダーを展開
   - 以下のファイルをドラッグ&ドロップでチャットビューに追加：
     - **JsonData.cs**
     - **JsonLoanRepository.cs**
     - **JsonPatronRepository.cs**

2. **データアクセスクラスの動作説明を生成**
   ```plaintext
   @workspace /explain データアクセスクラスがどのように動作するか説明してください
   ```

3. **生成された説明の要点を確認**
   - **JsonData クラス**: JSONファイルのデータ読み込み・保存
   - **JsonPatronRepository クラス**: 利用者データの操作
   - **JsonLoanRepository クラス**: 貸出データの操作
   - **データの流れ**: メモリへの読み込み → 操作 → ファイルへの保存

#### ステップ 5: JSONデータファイルの確認

1. **JSONファイルの場所を確認**
   - src/Library.Console/Json フォルダーを確認
   - 以下のファイルが含まれていることを確認：
     - Authors.json（著者情報）
     - Books.json（書籍情報）
     - BookItems.json（書籍アイテム）
     - Patrons.json（利用者情報）
     - Loans.json（貸出情報）

2. **データ関連の理解**
   - エンティティ間はIDプロパティでリンク
   - 例：LoanオブジェクトのPatronId → 対応するPatronオブジェクトのId

> **📝 注意**: このプロジェクトでは、著者名・書籍タイトル・利用者名は匿名化されています

---

### タスク 3: アプリケーションをビルドして実行する

実際にアプリケーションを動作させることで、ユーザーインターフェースと機能を理解します。

#### ステップ 1: アプリケーションの起動

1. **ソリューションエクスプローラービューを確認**
   > **⚠️ 注意**: 「エクスプローラービュー」ではなく「ソリューションエクスプローラービュー」を使用してください

2. **アプリケーションを実行**
   - **Library.Console** プロジェクトを右クリック
   - **[デバッグ]** → **[新しいインスタンスを開始]** を選択

#### ステップ 2: 基本操作の確認

以下の手順で図書館アプリケーションの基本機能をテストします：

1. **利用者検索**
   - パトロン名の入力プロンプト: **「One」** と入力（大文字のOで開始）
   - **Enter** を押下

   > **⚠️ 重要**: アプリケーションは大文字小文字を区別します

2. **利用者選択**
   - 検索結果リストが表示されます
   - "Input Options" プロンプト: **「2」** と入力
   - **Enter** を押下（2番目の利用者を選択）

3. **貸出詳細確認**
   - 利用者名、メンバーシップ状況、書籍貸出詳細が表示されます
   - "Input Options" プロンプト: **「1」** と入力
   - **Enter** を押下（最初の書籍を選択）

4. **書籍返却処理**
   - 書籍の詳細情報が表示されます
   - "Input Options" プロンプト: **「r」** と入力
   - **Enter** を押下（書籍を返却）

5. **返却確認**
   - **"Book was successfully returned."** メッセージが表示されることを確認
   - 書籍詳細で **"Returned: True"** が表示されることを確認

#### ステップ 3: データ更新の確認

1. **新しい検索を開始**
   - **「s」** と入力して **Enter**（新しい検索）

2. **同じ利用者で確認**
   - パトロン名: **「One」** と入力
   - 利用者選択: **「2」** と入力
   - 最初の書籍貸出が **「Returned: True」** になっていることを確認

3. **アプリケーション終了**
   - **「q」** と入力して **Enter**
   - デバッグセッションを停止

> **✅ 完了チェック**:
> - アプリケーションが正常に起動する
> - 利用者検索が機能する
> - 書籍返却処理が正常に動作する
> - データの更新が永続化される

---

## 演習 3: GitHub リポジトリと空の README ファイルを作成する

### 目標
コード共有とバージョン管理のため、GitHub上にリポジトリを作成します。

---

### タスク 1: GitHub リポジトリを作成する

#### ステップ 1: GitHub アカウントの確認

1. **ブラウザーでGitHubアカウントにアクセス**
   - 必要に応じて以下の情報でログイン：
     - URL: `https://github.com/enterprises/Microsoft-APL/sso`
     - メールアドレス: `@lab.CloudPortalCredential(1).Username`
     - パスワード: `@lab.CloudPortalCredential(1).Password`

2. **リポジトリ一覧を確認**
   - アカウントメニューから **[Your repositories]**（あなたのリポジトリ）を選択
   - まだリポジトリが存在しないことを確認

#### ステップ 2: Git設定の準備

1. **メモ帳を開いて**、以下のGitコマンドテンプレートを作成：
   ```bash
   git config --global user.email "[ラボで割り当てられたメール]"
   git config --global user.name "[あなたの名前]"
   ```

2. **実際のコマンドに置き換え**：
   - `[ラボで割り当てられたメール]` → `@lab.CloudPortalCredential(1).Username`
   - `[あなたの名前]` → 自分の名前に置き換え

#### ステップ 3: Visual Studio Code での Git設定

1. **Visual Studio Code に切り替え**

2. **統合ターミナルを開く**
   - **[ターミナル]** メニュー → **[新しいターミナル]** を選択

3. **Git設定コマンドを実行**
   - メモ帳で作成した2つのコマンドを順番に実行

#### ステップ 4: GitHub へのリポジトリ公開

1. **ソース管理ビューを開く**
   - 左サイドバーの**ソース管理アイコン**をクリック

2. **GitHub に公開**
   - **[GitHub に公開]** ボタンをクリック

3. **認証処理（必要な場合）**
   - GitHubアカウントでのサインインを求められた場合：
     - **[許可]** をクリック
     - ラボ環境のアカウントを選択
     - 必要に応じて **[GitHub に公開]** を再度クリック

4. **公開設定**
   - リポジトリ名: **AccelerateDevGitHubCopilot**（デフォルトのまま）
   - **[GitHub プライベートリポジトリに公開]** をクリック

5. **公開完了の確認**
   - 公開プロセス中にステータスメッセージが表示されます
   - 公開完了メッセージが表示されることを確認

> **🔄 再認証**: GitHub アカウントの再認証が求められる場合があります。画面の指示に従って認証を完了してください。

---

### タスク 2: GitHub で空の README ファイルを作成する

#### ステップ 1: GitHub でリポジトリを確認

1. **GitHubアカウントのブラウザーに切り替え**

2. **AccelerateDevGitHubCopilot リポジトリを開く**
   - リポジトリが表示されない場合：
     - ページを更新
     - または Visual Studio Code の通知から **[GitHub 上で開く]** をクリック

#### ステップ 2: README ファイルの作成

1. **README を追加**
   - リポジトリの **[コード]**タブで **[README の追加]** をクリック

2. **内容を入力**
   - エディターに **「Coming soon」** と入力
   - **[変更をコミットする]** をクリック

3. **コミットを確定**
   - [変更のコミット] ダイアログで **[変更のコミット]** をクリック

---

### タスク 3: ローカル リポジトリに変更をプルする

#### ステップ 1: Visual Studio Code で変更を取得

1. **Visual Studio Code に切り替え**

2. **ソース管理ビューを開く**

3. **変更をプル**
   - **[その他の操作]** メニュー（省略記号「...」）をクリック
   - **[プル]** を選択

#### ステップ 2: README ファイルの確認

1. **エクスプローラービューを開く**
   - ソリューションエクスプローラーを折りたたんで、デフォルトのファイル/フォルダーエクスプローラーを使用

2. **README.md を開く**
   - **AccelerateDevGitHubCopilot** フォルダーを展開
   - **README.md** ファイルをクリック
   - 「Coming soon」メッセージが表示されることを確認

> **✅ 完了チェック**:
> - GitHubリポジトリが作成されている
> - README.mdファイルが存在する
> - ローカルとリモートが同期されている

---

## 演習 4: README ファイルのプロジェクト ドキュメントを作成する

### 目標
GitHub Copilotを使用して、プロジェクトの包括的なREADMEドキュメントを生成します。

### README ファイルの必要セクション

以下のセクションを含む充実したREADMEを作成します：

1. **プロジェクトタイトル** - プロジェクトの明確な名前
2. **説明** - プロジェクトの目的と機能の詳細
3. **プロジェクト構造** - フォルダーとファイルの構成
4. **主要なクラスとインターフェース** - 重要なコンポーネントの一覧
5. **使用方法** - アプリケーションの実行手順
6. **ライセンス** - プロジェクトのライセンス情報

---

### タスク 1: GitHub Copilot を使用してプロジェクト ドキュメントを生成する

#### ステップ 1: チャットビューの準備

1. **チャットビューを開く**
   - 既存のチャット履歴をクリアして新しい会話を開始することをお勧めします

2. **コンテキストの設定**
   - 今回は`@workspace`参加者を使用してソリューション全体を対象にします
   - 個別ファイルを追加する必要はありません

#### ステップ 2: README ドキュメントの生成

1. **包括的なプロンプトを入力**
   ```plaintext
   @workspace このコードリポジトリのREADME.mdファイルの内容を生成してください。プロジェクトタイトルは「Library App」を使用してください。READMEファイルには以下のセクションを含めてください：説明、プロジェクト構造、主要なクラスとインターフェース、使用方法、ライセンス。すべてのセクションを生のマークダウンとして書式設定してください。プロジェクト構造はインデント付きの箇条書きを使用して表現してください。".gitignore"、".github"、"bin"、"obj"フォルダーは含めないでください。
   ```

2. **生成結果の確認**
   - 各セクションがマークダウンとして適切に書式設定されていることを確認
   - プロジェクト構造が階層的に表示されていることを確認
   - 主要クラスの説明が含まれていることを確認

> **💡 ヒント**: より詳細な情報が必要な場合は、セクションごとに個別のプロンプトを使用することも可能です

#### ステップ 3: README.md ファイルの更新

1. **README.md ファイルを開く**
   - エクスプローラービューから README.md を開く

2. **生成されたコンテンツをコピー**
   - GitHub Copilotが提案したドキュメントセクションを全選択
   - README.md ファイルに貼り付け（既存の「Coming soon」を置き換え）

3. **書式設定の調整**
   - 必要に応じてマークダウンの書式を調整
   - インラインチャットを使用して「マークダウンドキュメントの書式設定を修正してください」と依頼することも可能

4. **最終的な内容確認**
   以下の内容が含まれていることを確認：

   ```markdown
   # Library App
   
   ## Description
   Library Appは、図書館運営（利用者管理、書籍貸出、メンバーシップ更新）を行うコンソールベースのアプリケーションです。JSONベースのデータストレージシステムを使用し、図書館機能を処理する各種サービスを提供します。
   
   ## Project Structure
   - AccelerateDevGitHubCopilot.sln
   - README.md
   - src/
     - Library.ApplicationCore/
       - Entities/ (Author.cs, Book.cs, Loan.cs等)
       - Enums/ (各種ステータス列挙型)
       - Interfaces/ (リポジトリ・サービスインターフェース)
       - Services/ (PatronService.cs, LoanService.cs)
     - Library.Console/ (コンソールアプリケーション)
     - Library.Infrastructure/ (データアクセス層)
   - tests/
     - UnitTests/ (単体テスト)
   
   ## Key Classes and Interfaces
   [主要クラスとインターフェースの詳細リスト]
   
   ## Usage
   1. リポジトリをクローン
   2. Visual StudioでAccelerateDevGitHubCopilot.slnを開く
   3. ソリューションをビルド
   4. Library.Consoleプロジェクトを実行
   5. 画面指示に従って操作
   
   ## License
   このプロジェクトはMITライセンスの下でライセンスされています。
   ```

5. **ファイルを保存**

---

### タスク 2: README ファイルの更新をコミットしてプッシュする

#### ステップ 1: 変更のコミット

1. **ソース管理ビューを開く**

2. **AIコミットメッセージ生成**
   - メッセージボックス右側の**スパークルアイコン**をクリック
   - GitHub Copilotが以下のようなコミットメッセージを生成します：
   ```
   README.mdを作成し、Library Appの説明、プロジェクト構造、主要なクラスとインターフェース、使用方法、ライセンス情報を追加
   ```

3. **変更をステージングしてコミット**
   - 変更されたファイル（README.md）の横にある **+** アイコンをクリックしてステージング
   - **[コミット]** ボタンをクリック

#### ステップ 2: リモートリポジトリへの同期

1. **変更をプッシュ**
   - **[同期]** ボタンまたは **[プッシュ]** ボタンをクリック

2. **認証（必要な場合）**
   - GitHub資格情報での認証を求められた場合は承認してください

---

### タスク 3: 作業の確認

#### ステップ 1: GitHub での確認

1. **GitHubリポジトリを開く**
   - AccelerateDevGitHubCopilotプロジェクトのGitHubリポジトリにアクセス

2. **[コード]タブでREADME.mdの確認**
   - 更新されたREADMEファイルを確認（ブラウザの更新が必要な場合があります）

#### ステップ 2: 内容の検証

1. **プロジェクト構造の一致確認**
   - READMEファイルに記載されたプロジェクト構造が実際のリポジトリ構造と一致することを確認
   - GitHub インターフェースの左側ファイルツリーを使用して構造を展開・確認

2. **コミット履歴の確認**
   - コミット履歴を確認し、GitHub Copilotによって生成されたコミットメッセージを見つけてください

> **✅ 最終チェック**:
> - README.mdファイルが包括的な情報を含んでいる
> - プロジェクト構造が正確に記載されている
> - GitHubリポジトリで正しく表示されている
> - コミット履歴にAI生成メッセージが記録されている

---

## 演習 1-4 まとめ

### 🎉 パート1で達成したこと

1. **GitHub Copilot環境構築**
   - Visual Studio CodeへのGitHub Copilot拡張機能インストール
   - GitHubアカウントとの連携設定

2. **コードベース理解**
   - 図書館管理アプリケーションの構造分析
   - GitHub Copilotを使用したコード説明生成
   - データアクセスパターンの理解

3. **アプリケーション動作確認**
   - 実際のアプリケーション実行とテスト
   - 基本的な図書館業務フロー（検索・貸出・返却）の確認

4. **GitHubリポジトリ作成**
   - プライベートリポジトリの作成
   - Git設定とソース管理の基礎

5. **プロジェクト文書化**
   - AI支援による包括的なREADMEファイル生成
   - マークダウン形式での技術文書作成

### 🔑 重要な学習ポイント

- **@workspace参加者**: プロジェクト全体をコンテキストとして利用
- **#editor指定**: 現在開いているファイルをコンテキストに含める
- **インラインチャット**: コード内で直接GitHub Copilotと対話
- **AIコミットメッセージ**: 変更内容を自動的に要約

### 🚀 次のステップ

パート2では、GitHub Copilotを使用して新機能（書籍在庫確認システム）の開発を行います。今回学習した基礎知識を活用して、より実践的な開発作業に取り組みましょう。

---

> **💡 トラブルシューティング**
> 
> **問題**: GitHub Copilot拡張機能が認識されない
> **解決策**: Visual Studio Codeを完全に再起動してください
> 
> **問題**: GitHubへのプッシュでエラーが発生
> **解決策**: GitHub認証情報を再確認し、必要に応じて再認証してください
> 
> **問題**: アプリケーションのビルドエラー
> **解決策**: .NETの依存関係が正しく復元されているか確認してください